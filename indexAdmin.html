<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Pokemon</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous" />
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-w76AqPfDkMBDXo30jS1Sgez6pr3x5MlQ1ZAGC+nuZB+EYdgRZgiwxhTBTkF7CXvN"
    crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.14.0/css/all.css" />
  <link rel="shortcut icon" href="img/IconoPokemon.png" type="image/x-icon">
  <link rel="stylesheet" href="css/style.css" />
</head>

<body class="fondoPo" onload="slideType(),getAllPokemon()">
  <nav class="navbar navbar-expand-lg navbar-light colorNav">
    <div class="container-fluid">
      <a class="navbar-brand">TIENDA POKEMONES</a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent"
        aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarSupportedContent">
        <ul class="navbar-nav me-auto mb-2 mb-lg-0">
          <li class="nav-item">
            <a class="nav-link active" aria-current="page" href="indexAdmin.html">Inicio</a>
          </li>
          <li class="nav-item" id="inicioSesionLi">
            <a class="nav-link" aria-current="page" href="inicioSesion.html">Iniciar Sesión</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" aria-current="page" href="compraPokemones.html">Comprar Pokemones</a>
          </li>
          <li class="nav-item ">
            <a class="nav-link" aria-current="page" type="button" onclick="deleteLogin()">Cerrar Sesión</a>
        </li>
        </ul>
        <form class="d-flex">
          <input class="form-control me-2" type="text" name="txtBuscar" id="txtBuscar" onkeyup="autoCompletePokemon()">
          <button class="btn btn-outline-light" type="text">Search</button>
        </form>
      </div>
    </div>
  </nav>
  <div class="container-fluid">
    <div class="row" style="height: 100px">
      <div class="col-12 d-flex justify-content-end">
        <ul class="list-group">
          <li id="lista-resultados" class="list-group-item"></li>
        </ul>
      </div>
    </div>

    <div class="row" style="height: 300px">
      <div class="col-8 fondoCarrusel">
        <div id="carouselExampleCaptions" class="carousel slide" data-bs-ride="carousel">
          <div class="carousel-indicators">
            <button type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide-to="0" class="active"
              aria-current="true" aria-label="Slide 1"></button>
            <button type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide-to="1"
              aria-label="Slide 2"></button>
            <button type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide-to="2"
              aria-label="Slide 3"></button>
          </div>
          <div class="carousel-inner">
            <div class="carousel-item active">
              <img
                src="https://upload.wikimedia.org/wikipedia/commons/thumb/9/98/International_Pok%C3%A9mon_logo.svg/640px-International_Pok%C3%A9mon_logo.svg.png"
                class="d-block" style="width: 35%; height: 297px;" alt="..." />
            </div>
            <div class="carousel-item">
              <img src="https://cdn.custom-cursor.com/collections/129/cover-pokemon-preview.png" class="d-block"
                style="width: 35%; height: 297px;" alt="..." />
            </div>
            <div class="carousel-item">
              <img
                src="https://cdn.hobbyconsolas.com/sites/navi.axelspringer.es/public/media/image/2014/03/288149-origen-todos-nombres-pokemon-i.png?tf=3840x"
                class="d-block" style="width: 35%; height: 297px;" alt="..." />
            </div>
          </div>
          <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleCaptions"
            data-bs-slide="prev">
            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
            <span class="visually-hidden">Previous</span>
          </button>
          <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleCaptions"
            data-bs-slide="next">
            <span class="carousel-control-next-icon" aria-hidden="true"></span>
            <span class="visually-hidden">Next</span>
          </button>
        </div>
      </div>
      <div class="col-4"></div>
    </div>

    <div class="row" style="height: 200px">
      <div class="col-12">
        <div class="container my-3 mt-5" id="featureContainer">
          <div>
            <div class="row mx-auto my-auto justify-content-center">
              <div id="featureCarousel" class="carousel slide" data-bs-ride="carousel">
                <div class="d-flex justify-content-between position-relative top-50 z-1 px-3">
                  <a class="indicator" href="#featureCarousel" role="button" data-bs-slide="prev">
                    <span class="fas fa-chevron-left" aria-hidden="true"></span>
                  </a>
                  &nbsp;&nbsp;
                  <a class="w-aut indicator" href="#featureCarousel" role="button" data-bs-slide="next">
                    <span class="fas fa-chevron-right" aria-hidden="true"></span>
                  </a>
                </div>
                <div class="carousel-inner" role="listbox" id="carouselType">
                  <!-- aqui van todas las categorias de los pokimons -->

                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <script src="Js/login.js"></script>
</body>

</html>

<script>
  const categoriasPokemon1 = []
  function getTypePokemon() {
    return new Promise((resolve) => {
      fetch("https://pokeapi.co/api/v2/type")
        .then(response => response.json())
        .then(data => {
          data.results.forEach(element => {
            categoriasPokemon1.push(element)
          });
          return resolve("Ok")
        })//Termina el fech
    })  //termina la promesa
  }
  function slideType() {
    getTypePokemon()
      .then(data => {
        let slide = "";
        categoriasPokemon1.forEach((element, index) => {
          if (index === 0) {
            slide += `<div class="carousel-item active">
                      <div class="col-md-2">
                        <div class="card">
                          <div class="card-img">
                            <a href="tipos.html" onclick="urlTypeLocal('${element.url}')">
                              <img
                                src="https://www.pngall.com/wp-content/uploads/13/Pokemon-Logo-PNG-Pic.png"
                                class="img-fluid"
                              >
                            </a>
                          </div>
                          <div class="card-img-overlays">${element.name}</div>
                        </div>
                      </div>
                    </div>`
          } else {
            slide += `<div class="carousel-item ">
                      <div class="col-md-2">
                        <div class="card">
                          <div class="card-img">
                            <a href="tipos.html" onclick="urlTypeLocal('${element.url}')">
                              <img
                                src="https://www.pngall.com/wp-content/uploads/13/Pokemon-Logo-PNG-Pic.png"
                                class="img-fluid"
                              >
                            </a>
                          </div>
                          <div class="card-img-overlays">${element.name}</div>
                        </div>
                      </div>
                    </div>`
          }

        });

        document.getElementById("carouselType").innerHTML = slide
        carousel()
      })
  }

  function urlTypeLocal(valor) {
    console.log("URL")
    localStorage.setItem("url", valor)
    localStorage.url = valor

    let url = localStorage.url

    let urlType = localStorage.getItem("url")
  }

  function getAllPokemon() {

    fetch('https://pokeapi.co/api/v2/pokemon?limit=100000&offset=0')
      .then(response => response.json())
      .then(data => {
        allPokemon = Object.values(data.results)
      })
  }

  getAllPokemon()
  function autoCompletePokemon() {
    let textoBuscar = document.getElementById('txtBuscar').value

    if (textoBuscar.length >= 1) {
      const filtroPokemon = allPokemon.filter(filtrarPokemon)
      let lista = `<ul>`
      filtroPokemon.forEach(element => {
        iconoPokemon(element.url)
        lista += `<li> 
                    <a onclick = 'detallePokemon("${element.url}")' href='detallePokemon.html'>${element.name}</a>
                    <img id="icono${element.name}">
                  </li>`
      })
      lista += `</ul>`

      document.getElementById('lista-resultados').innerHTML = lista
    } else {
      document.getElementById('lista-resultados').innerHTML = ''; // Oculta la lista de resultados
    }
  }

  function filtrarPokemon(element) {
    let textoBuscar = document.getElementById('txtBuscar').value
    return element.name.includes(textoBuscar)
  }

  function detallePokemon(urlPokemon) {
    localStorage.urlPokemon = urlPokemon

  }

  function iconoPokemon(urlPokemon) {
    fetch(urlPokemon)
      .then(response => response.json())
      .then(data => {
        let icono = data.sprites.versions["generation-viii"].icons.front_default
        document.getElementById(`icono${data.name}`).src = `${icono}`
      })
  }
</script>
<script src="Js/pokemones.js"></script>
